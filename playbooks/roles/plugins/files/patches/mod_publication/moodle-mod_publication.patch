diff --git a/classes/local/allfilestable/base.php b/classes/local/allfilestable/base.php
index f643430..26703ae 100644
--- a/classes/local/allfilestable/base.php
+++ b/classes/local/allfilestable/base.php
@@ -287,6 +287,7 @@ class base extends \table_sql {
 
         // Fetch the attempts!
         $sort = $this->get_sql_sort();
+        $sort = preg_replace('/(?<=\W)?(email)(?=\W)/', 'u.\1', $sort);
         if ($sort) {
             $sort = "ORDER BY $sort";
         }
